---
phase: v1.2-06
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/package.json
  - docs/astro.config.mjs
  - docs/tsconfig.json
  - docs/src/content/docs/index.mdx
  - docs/src/content/docs/getting-started/index.md
  - docs/src/content/docs/getting-started/install.md
  - docs/src/content/docs/getting-started/first-app.md
  - docs/src/content/docs/config/index.md
  - docs/src/content/docs/config/schema.md
  - docs/src/content/docs/config/examples.md
  - docs/src/content/docs/config/cli-options.md
  - docs/public/favicon.svg
autonomous: true

must_haves:
  truths:
    - "User can run 'npm run dev' and see the documentation site locally"
    - "User can navigate to Getting Started and see installation instructions"
    - "User can read the config.json schema documentation with examples"
    - "User can build the static site with 'npm run build'"
  artifacts:
    - path: "docs/package.json"
      provides: "npm dependencies (Astro + Starlight)"
      min_lines: 15
    - path: "docs/astro.config.mjs"
      provides: "Astro configuration with Starlight integration"
      contains: "starlight"
      min_lines: 30
    - path: "docs/src/content/docs/getting-started/install.md"
      provides: "Installation guide with Zig build instructions"
      contains: "zig build"
      min_lines: 30
    - path: "docs/src/content/docs/config/schema.md"
      provides: "Complete config.json reference"
      contains: "port"
      min_lines: 80
  key_links:
    - from: "docs/astro.config.mjs"
      to: "docs/src/content/docs/"
      via: "sidebar autogenerate"
      pattern: "autogenerate.*directory"
    - from: "docs/src/content/docs/getting-started/install.md"
      to: "zig build command"
      via: "code block example"
      pattern: "```bash.*zig build"
    - from: "docs/src/content/docs/config/schema.md"
      to: "config.json structure"
      via: "JSON schema example"
      pattern: "```json"
---

<objective>
Create the foundation for NANO's documentation site using Astro + Starlight, including Getting Started guides and Configuration reference.

Purpose: Enable users to quickly understand how to install, configure, and run NANO without consulting source code or asking questions.

Output: Working documentation site with installation guide, first app tutorial, and complete config.json reference that can be served locally and built for production.
</objective>

<execution_context>
@/Users/gleicon/.claude/get-shit-done/workflows/execute-plan.md
@/Users/gleicon/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/gleicon/code/zig/nano/.planning/PROJECT.md
@/Users/gleicon/code/zig/nano/.planning/ROADMAP.md
@/Users/gleicon/code/zig/nano/.planning/STATE.md
@/Users/gleicon/code/zig/nano/.planning/phases/v1.2-06-documentation-site/v1.2-06-RESEARCH.md
@/Users/gleicon/code/zig/nano/.planning/BACKLOG.md
@/Users/gleicon/code/zig/nano/README.md
@/Users/gleicon/code/zig/nano/test/cloudflare-worker/index.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Astro + Starlight documentation site</name>
  <files>
    docs/package.json
    docs/astro.config.mjs
    docs/tsconfig.json
    docs/public/favicon.svg
    docs/.gitignore
  </files>
  <action>
Create docs/ directory in the NANO repository root. Initialize Astro + Starlight using:
```bash
cd /Users/gleicon/code/zig/nano
npm create astro@latest -- --template starlight --dir docs --yes --no-install --skip-houston
cd docs
npm install
```

Configure astro.config.mjs with:
- Title: "NANO Documentation"
- Description: "JavaScript runtime for serverless workloads"
- Sidebar structure with autogenerate for: getting-started, config, api, wintercg, deployment
- Social links: GitHub (if available in PROJECT.md)
- Enable pagefind search
- Enable lastUpdated dates
- Set editLink to GitHub repo

Create minimal docs/.gitignore with:
```
node_modules/
dist/
.astro/
```

Create simple favicon.svg in docs/public/ (simple geometric shape or letter N).
  </action>
  <verify>
```bash
cd /Users/gleicon/code/zig/nano/docs
npm run dev
```
Site serves at http://localhost:4321 with default Starlight landing page.
  </verify>
  <done>
- docs/package.json exists with @astrojs/starlight dependency
- docs/astro.config.mjs exists with sidebar configuration
- npm run dev starts development server successfully
- Site accessible at http://localhost:4321
  </done>
</task>

<task type="auto">
  <name>Task 2: Write Getting Started documentation</name>
  <files>
    docs/src/content/docs/index.mdx
    docs/src/content/docs/getting-started/index.md
    docs/src/content/docs/getting-started/install.md
    docs/src/content/docs/getting-started/first-app.md
  </files>
  <action>
Create landing page at docs/src/content/docs/index.mdx with:
- Hero section: NANO title, tagline "JavaScript runtime for serverless workloads"
- Quick feature highlights (Workers API compatible, V8-powered, multi-app hosting)
- Call-to-action links to /getting-started/install

Create docs/src/content/docs/getting-started/index.md:
- Overview of NANO (what it is, why use it)
- Prerequisites list: Zig 0.15.x, macOS/Linux/Windows WSL
- Quick navigation to install, first-app
- Frontmatter: title "Getting Started with NANO", sidebar.order: 1

Create docs/src/content/docs/getting-started/install.md:
- Build from source: git clone, zig build, binary location at zig-out/bin/nano
- Release binary option (download from GitHub releases)
- Verification: ./zig-out/bin/nano --help
- Note about build time (~2-3 minutes first build)
- Frontmatter: title "Installation", sidebar.order: 2

Create docs/src/content/docs/getting-started/first-app.md:
- Create my-app/index.js with basic fetch handler example (use pattern from test/cloudflare-worker/index.js)
- Run: ./zig-out/bin/nano serve --port 3000 --app ./my-app
- Test: curl http://127.0.0.1:3000/api/hello
- Expected output: JSON response
- Next steps links to /config and /api
- Frontmatter: title "Your First App", sidebar.order: 3

Use code blocks with language tags (```bash, ```javascript), use :::note and :::tip asides where helpful.
  </action>
  <verify>
```bash
cd /Users/gleicon/code/zig/nano/docs
npm run dev
```
Navigate to http://localhost:4321/ and verify:
- Landing page shows hero and CTA
- Getting Started sidebar appears with install, first-app
- All pages render without broken frontmatter
- Code blocks have syntax highlighting
  </verify>
  <done>
- Landing page exists with hero section
- Three getting-started pages exist with proper frontmatter
- Pages link together correctly
- All code examples use proper syntax highlighting
- Site builds without errors: npm run build succeeds
  </done>
</task>

<task type="auto">
  <name>Task 3: Write Configuration reference documentation</name>
  <files>
    docs/src/content/docs/config/index.md
    docs/src/content/docs/config/schema.md
    docs/src/content/docs/config/examples.md
    docs/src/content/docs/config/cli-options.md
  </files>
  <action>
Create docs/src/content/docs/config/index.md:
- Overview of NANO configuration system
- config.json vs CLI flags
- Hot reload behavior (config watcher)
- Navigation to schema, examples, cli-options
- Frontmatter: title "Configuration", sidebar.order: 1

Create docs/src/content/docs/config/schema.md:
- Full config.json schema with all fields documented
- Top-level fields: port (required), defaults (optional)
- App object fields: name, hostname, path, timeout_ms, memory_mb, env
- For each field: type, default value, example, constraints
- Notes about Host header matching (case-insensitive, must be exact)
- Caution about timeout being iteration-based (not wall-clock)
- Code example showing complete config.json with annotations
- Frontmatter: title "Config Schema Reference", sidebar.order: 2

Create docs/src/content/docs/config/examples.md:
- Single-app config example
- Multi-app config with virtual hosts
- Environment variables example (DATABASE_URL, API_KEY patterns)
- Production config with realistic timeouts and memory limits
- Each example: JSON code block + explanation
- Frontmatter: title "Configuration Examples", sidebar.order: 3

Create docs/src/content/docs/config/cli-options.md:
- Document CLI flags for `nano serve` command
- --port, --app, --config flags
- Single-app mode (--port + --app) vs multi-app mode (--config)
- Examples for each mode
- Frontmatter: title "CLI Options", sidebar.order: 4

Use JSON code blocks with `title="config.json"` attribute. Use :::caution for gotchas (timeout behavior, Host header port).
  </action>
  <verify>
```bash
cd /Users/gleicon/code/zig/nano/docs
npm run build
npm run preview
```
Navigate to /config/ and verify:
- All 4 config pages render
- JSON examples have syntax highlighting
- Schema page documents all fields from PROJECT.md requirements
- Examples show single-app and multi-app patterns
  </verify>
  <done>
- Four config documentation pages exist with proper frontmatter
- config/schema.md documents port, defaults, apps[] with all fields
- config/examples.md shows at least 3 example configs
- config/cli-options.md documents --port, --app, --config flags
- Build succeeds: npm run build produces dist/ folder
  </done>
</task>

</tasks>

<verification>
**Build verification:**
```bash
cd /Users/gleicon/code/zig/nano/docs
npm run build
npm run preview
```
Verify all pages accessible, no 404s, search works.

**Content verification:**
- Getting Started > Install page shows zig build command
- Getting Started > First App shows complete example with curl test
- Config > Schema documents all required and optional fields
- Config > Examples shows multi-app setup

**Starlight verification:**
- Sidebar auto-generates from filesystem
- Search indexes all pages (test search for "install")
- Code blocks have syntax highlighting
- All internal links work (no broken references)
</verification>

<success_criteria>
1. Documentation site builds successfully with `npm run build`
2. Development server runs with `npm run dev` on port 4321
3. Getting Started guide walks user through installation and first app deployment
4. Config.json schema is fully documented with all fields and examples
5. All pages have proper frontmatter and appear in sidebar
6. Code examples use proper syntax highlighting (bash, javascript, json)
7. Site structure ready for API reference and deployment docs (next plan)
</success_criteria>

<output>
After completion, create `.planning/phases/v1.2-06-documentation-site/v1.2-06-01-SUMMARY.md` with:
- Files created count and list
- Key documentation pages added
- Build verification results
- Next steps: API reference and deployment guides (plan 02)
</output>
