# Plan 02-03: URL APIs

## Goal
Implement URL and URLSearchParams classes for Workers API compatibility.

## Context
- URL parsing is fundamental for web applications
- URLSearchParams handles query string encoding/decoding
- These are used extensively in fetch(), routing, and request handling

## Success Criteria
1. `new URL('https://example.com/path?q=1')` parses correctly
2. `url.hostname`, `url.pathname`, `url.search` return correct values
3. `new URLSearchParams('a=1&b=2').get('a')` returns '1'
4. `params.append('c', '3')` and `params.toString()` work

## Implementation

### Files to Create/Modify

1. **src/api/url.zig** (NEW)
   - URL class with parsing and property getters
   - URLSearchParams class with get/set/append/delete/toString

2. **build.zig** (MODIFY)
   - Add url module

3. **src/repl.zig** and **src/engine/script.zig** (MODIFY)
   - Register URL APIs

### Technical Approach

**URL class properties:**
- href, origin, protocol, host, hostname, port
- pathname, search, hash, username, password
- searchParams (returns URLSearchParams)

**URLSearchParams methods:**
- get(name), getAll(name), has(name)
- set(name, value), append(name, value), delete(name)
- toString(), entries(), keys(), values()

### Verification
```javascript
const url = new URL('https://user:pass@example.com:8080/path?q=test#hash');
console.log(url.protocol);  // "https:"
console.log(url.hostname);  // "example.com"
console.log(url.port);      // "8080"
console.log(url.pathname);  // "/path"
console.log(url.search);    // "?q=test"
console.log(url.hash);      // "#hash"

const params = new URLSearchParams('a=1&b=2');
console.log(params.get('a'));  // "1"
params.append('c', '3');
console.log(params.toString()); // "a=1&b=2&c=3"
```

## Duration
Estimated: 1 plan
