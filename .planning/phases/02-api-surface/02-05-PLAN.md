# Plan 02-05: Crypto and Fetch APIs

## Goal
Implement crypto.subtle.digest() and basic fetch() for Workers API compatibility.

## Context
- crypto.subtle is essential for hashing, signatures, encryption
- fetch() is the primary HTTP client API in Workers
- These complete Phase 2's API surface requirements

## Success Criteria
1. `crypto.subtle.digest('SHA-256', data)` returns hash as ArrayBuffer
2. `crypto.randomUUID()` returns valid UUID string
3. Basic fetch() makes HTTP requests (sync wrapper initially)

## Implementation

### Files to Create/Modify

1. **src/api/crypto.zig** (NEW)
   - crypto.subtle.digest() using Zig's std.crypto
   - crypto.randomUUID() using std.crypto.random
   - crypto.getRandomValues() for typed arrays

2. **src/api/fetch.zig** (NEW)
   - Sync fetch() using Zig's std.http.Client
   - Returns Response object with text(), json() methods

3. **build.zig** (MODIFY)
   - Add crypto and fetch modules

### Technical Approach

**crypto.subtle.digest():**
- Support SHA-1, SHA-256, SHA-384, SHA-512
- Use Zig's std.crypto.hash
- Return ArrayBuffer with hash bytes

**crypto.randomUUID():**
- Use std.crypto.random
- Format as UUID v4 string

**fetch() (simplified):**
- Synchronous HTTP client (async requires V8 promises)
- Basic GET/POST support
- Response object with status, headers, text(), json()

### Verification
```javascript
// Crypto
const uuid = crypto.randomUUID();
console.log(uuid);  // "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"

// Fetch (sync)
const response = fetch('https://httpbin.org/get');
console.log(response.status());  // 200
console.log(response.text());    // response body
```

## Risks
- Async fetch requires V8 promise integration (defer to Phase 3)
- TLS/HTTPS requires proper certificate handling

## Duration
Estimated: 1 plan
