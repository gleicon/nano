# Plan 03-01: HTTP Server Foundation

## Goal
Create a basic HTTP server in Zig that can accept connections and respond to requests.

## Context
- This is the foundation for multi-app hosting
- Need to understand Zig 0.15.2's networking and HTTP APIs
- Start simple: accept connection, respond with static content

## Success Criteria
1. `nano serve --port 8080` starts HTTP server
2. `curl http://localhost:8080/` returns "Hello from NANO!"
3. Server handles multiple sequential requests
4. Clean shutdown on Ctrl+C

## Implementation

### Files to Create/Modify

1. **src/server/http.zig** (NEW)
   - TCP server setup using std.net
   - HTTP request parsing
   - HTTP response writing
   - Connection handling loop

2. **src/main.zig** (MODIFY)
   - Add `serve` command
   - Parse --port argument
   - Call server module

3. **build.zig** (MODIFY)
   - Add server module

### Technical Approach

**TCP Server Setup:**
```zig
const address = std.net.Address.parseIp("0.0.0.0", port);
var server = address.listen(.{ .reuse_address = true });
defer server.deinit();
```

**Accept Loop:**
```zig
while (true) {
    const conn = server.accept() catch continue;
    defer conn.stream.close();
    handleRequest(conn);
}
```

**HTTP Parsing (simplified):**
- Read until \r\n\r\n (end of headers)
- Parse first line: METHOD PATH HTTP/1.1
- Respond with static content initially

### Verification
```bash
# Terminal 1
nano serve --port 8080

# Terminal 2
curl http://localhost:8080/
# Should return: Hello from NANO!

curl http://localhost:8080/any/path
# Should return same response (no routing yet)
```

## Risks
- Zig 0.15.2 networking API changes (already researched)
- Signal handling for clean shutdown

## Duration
Estimated: 1 plan
