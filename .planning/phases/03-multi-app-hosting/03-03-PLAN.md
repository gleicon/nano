# Plan 03-03: App Loader

## Goal
Load JavaScript apps from folder paths and prepare them for HTTP request handling.

## Context
- Apps are folders containing JavaScript entry points
- Entry point exports a fetch handler (Workers pattern)
- Need to compile and cache the script

## Success Criteria
1. `nano serve ./my-app` loads JavaScript from `./my-app/index.js`
2. Script is compiled and stored for request handling
3. Errors in script loading are reported clearly

## Implementation

### Files to Create/Modify

1. **src/server/app.zig** (NEW)
   - App struct: holds V8 context and compiled script
   - loadApp(path): read JS, compile, extract handler
   - App lifecycle management

2. **src/server/http.zig** (MODIFY)
   - Add app_path parameter to serve()
   - Load app on startup
   - Pass request to app handler

3. **src/main.zig** (MODIFY)
   - Add path argument to serve command
   - Pass to server

### Workers Handler Pattern

Entry point (index.js):
```javascript
export default {
  fetch(request) {
    return new Response("Hello from app!");
  }
}
```

### Technical Approach

1. Read file: `std.fs.cwd().readFileAlloc(path)`
2. Compile with V8
3. Execute to get module exports
4. Extract `default.fetch` function
5. Store for request handling

## Duration
Estimated: 1 plan
